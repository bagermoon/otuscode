name: ci / pr check
on:
  pull_request:
    types: [opened, synchronize, reopened, ready_for_review]
    branches:
      - main
    paths:
      - '**/*'
      - '!.github/**'
      - '!**/*.md'
      - "!.markdownlint.json"
      - "!.markdownlint-cli2.mjs"
      - "!package.json"
      - "!package-lock.json"
      - '!.editorconfig'
      - '!LICENSE'

jobs:
  test_build:
    if: ${{ github.event.pull_request.draft == false }}
    runs-on: ubuntu-latest

    permissions:
      actions: read
      contents: read
    steps:
      - uses: actions/checkout@v6

      - name: Setup dotnet
        uses: actions/setup-dotnet@v5
        with:
          cache: true
          cache-dependency-path: '**/packages.lock.json'
          global-json-file: global.json

      - name: Build solution
        run: dotnet build --no-restore --configuration Release
